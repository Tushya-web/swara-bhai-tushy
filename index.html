<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bhai Dooj Journey</title>
    <!-- Load Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Font Simulation */
        .font-serif {
            font-family: 'Georgia', 'Times New Roman', serif;
        }
        
        /* Custom Keyframes */
        @keyframes page-transition-in {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .page-transition {
            animation: page-transition-in 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }

        /* Utility Animations */
        @keyframes bounce-in {
            0% { transform: scale(0.5) translateY(50%); opacity: 0; }
            80% { transform: scale(1.05) translateY(0); opacity: 1; }
            100% { transform: scale(1) translateY(0); }
        }
        .pop-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            padding: 2rem;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.3);
            border: 4px solid #f9a8d4;
            animation: bounce-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            max-width: 90%;
            z-index: 50;
        }

        @keyframes float-up { 0% { opacity: 0; transform: translateY(0) rotate(0deg); } 100% { opacity: 0.8; transform: translateY(-300px) rotate(360deg); } }
        .particle-item { position: absolute; font-size: 1.5rem; pointer-events: none; }
        
        @keyframes fall-down { 0% { transform: translateY(0) rotate(0deg); opacity: 1; } 100% { transform: translateY(500px) rotate(360deg); opacity: 0; } }
        .confetti-item { position: absolute; font-size: 2rem; pointer-events: none; }
        
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        .animate-bounce-scale { animation: bounce-scale 1s infinite; }
        @keyframes bounce-scale { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        /* General Layout */
        body { background-color: #fff7ed; font-family: Inter, sans-serif; }
        .page-content {
            display: none;
            min-height: 50vh; 
            align-items: center; 
            justify-content: center; 
            padding: 1rem;
        }
        .page-content.active {
            display: flex;
        }

        /* Mobile-specific adjustments (max-width: 768px - Tailwind's 'md' breakpoint) */
        @media (max-width: 768px) {
            #page-1 h2 { font-size: 4rem !important; }
            #page-1 h1 { font-size: 2.5rem !important; }
            #page-6 h1 { font-size: 4rem !important; }
            #page-6 h2 { font-size: 1.5rem !important; }
            .pop-success h2 { font-size: 1.5rem !important; }
            .pop-success p { font-size: 1.25rem !important; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col font-sans antialiased text-gray-800" style="background-color: #fff7ed;">

    <main class="flex-grow flex items-center justify-center p-4 md:p-8 relative">

        <!-- Page 1: Main Greeting -->
        <div id="page-1" class="page-content active w-full max-w-6xl flex-col">
            <div class="text-center p-8 relative overflow-hidden page-transition">
                <!-- Animated background particles will be handled by JS -->
                <div class="fade-in-down" style="animation-delay: 0.3s;">
                    <p class="text-xl text-pink-500 font-semibold tracking-widest uppercase animate-pulse">
                        FOR MY LOVELY
                    </p>
                    <h2 class="text-6xl md:text-8xl font-serif font-extrabold text-pink-400 mb-4 tracking-tight animate-slide-in-left">
                        SISTER <span class="text-red-500 animate-bounce-emoji">♦</span>
                    </h2>
                    <h1 class="text-4xl md:text-6xl font-black text-gray-800 tracking-tight animate-slide-in-right">
                        Happy <span class="text-pink-400 font-serif glow-text">Bhai Dooj</span> From Tushy
                        <br/>
                        DEAR SIS
                    </h1>
                </div>
                <p class="max-w-md mx-auto mt-6 text-gray-600 fade-in-up" style="animation-delay: 0.6s;">
                    You've always been my biggest supporter, my secret keeper, and my forever partner-in-crime.
                    <br />
                    <span class="text-amber-500 animate-spin-slow">🪔</span> On this <span class="font-bold text-pink-500">Bhai Dooj</span>, I just want to know how lucky I am to have you as my sister.
                </p>
                <div class="mt-8 flex justify-center fade-in-up" style="animation-delay: 0.9s;">
                    <div class="animate-bounce-scale">
                        <!-- StickFiguresSVG (Inline SVG) -->
                        <svg viewBox="0 0 100 100" class="w-24 h-auto shadow-lg rounded-lg border-4 border-white hover:scale-110 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="65" cy="20" r="8" fill="#FFC0CB"/><rect x="62" y="28" width="6" height="30" fill="#FF69B4" rx="2"/><line x1="65" y1="28" x2="65" y2="58" stroke="#FF69B4" stroke-width="2"/><line x1="65" y1="35" x2="55" y2="45" stroke="#FF69B4" stroke-width="2"/><line x1="65" y1="35" x2="75" y2="45" stroke="#FF69B4" stroke-width="2"/><line x1="62" y1="58" x2="57" y2="70" stroke="#FF69B4" stroke-width="2"/><line x1="68" y1="58" x2="73" y2="70" stroke="#FF69B4" stroke-width="2"/><path d="M60 20 Q 62 15, 65 18 L 68 18 Q 70 15, 75 20" stroke="#FF69B4" fill="none" stroke-width="1.5"/><circle cx="35" cy="20" r="8" fill="#FFC0CB"/><rect x="32" y="28" width="6" height="30" fill="#4682B4"/><rect x="30" y="58" width="4" height="15" fill="#4682B4"/><rect x="36" y="58" width="4" height="15" fill="#4682B4"/><line x1="35" y1="35" x2="25" y2="45" stroke="#4682B4" stroke-width="2"/><line x1="35" y1="35" x2="45" y2="45" stroke="#4682B4" stroke-width="2"/><line x1="32" y1="28" x2="38" y2="28" stroke="#FFFFFF" stroke-width="2"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 2: Letter -->
        <div id="page-2" class="page-content w-full max-w-6xl flex-col">
            <div class="relative p-8 w-full page-transition">
                <h2 class="text-xs tracking-widest text-gray-500 text-center uppercase mb-1 fade-in animate-pulse">
                    A LETTER
                </h2>
                <h1 class="text-4xl font-serif font-extrabold text-pink-400 text-center mb-6 animate-slide-in-down">
                    FROM YOUR BHAI <span class="text-red-500 animate-bounce-emoji">♦</span>
                </h1>
                <div class="max-w-lg mx-auto bg-white p-8 rounded-xl shadow-lg border border-pink-100 relative scale-in">
                    <div class="absolute -top-6 -left-6 w-12 h-12 bg-pink-300 rounded-full animate-float opacity-70"></div>
                    <div class="absolute -bottom-4 -right-4 w-10 h-10 bg-red-300 rounded-full animate-float opacity-70" style="animation-delay: 1s;"></div>

                    <h3 class="text-2xl font-serif text-red-500 mb-4 fade-in-up">
                        Dear <span class="glow-text">Swara</span> <span class="text-red-400 animate-pulse">💕</span>
                    </h3>
                    <p class="text-gray-700 leading-relaxed indent-6 fade-in-up" style="animation-delay: 0.3s;">
                        I just want to remind you how special you are to me. May your life shine as bright as your smile, and may chocolates always find their way to you <span class="animate-spin-emoji">✨</span>.
                    </p>
                    <p class="mt-8 text-right text-lg text-gray-800 font-semibold fade-in-up" style="animation-delay: 0.6s;">
                        — With love, your brother <span class="text-pink-500 animate-heartbeat">💖</span>
                    </p>
                    <div class="absolute top-10 right-0 transform translate-x-1/2 -translate-y-1/2 w-24 h-auto">
                        <!-- HelloKittySVG (Inline SVG) -->
                        <svg viewBox="0 0 100 100" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="45" fill="#FFFFFF" stroke="#000000" stroke-width="2"/><circle cx="40" cy="40" r="3" fill="#000000"/><circle cx="60" cy="40" r="3" fill="#000000"/><path d="M50 50 L 53 50 M 50 50 L 47 50" stroke="#FF69B4" stroke-width="3"/><path d="M25 25 L 30 10 L 35 25 Z" fill="#FFFFFF" stroke="#000000" stroke-width="2"/><path d="M65 25 L 70 10 L 75 25 Z" fill="#FFFFFF" stroke="#000000" stroke-width="2"/><circle cx="70" cy="20" r="5" fill="#FF0000"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 3: Memory Carousel -->
        <div id="page-3" class="page-content w-full max-w-6xl flex-col">
            <div class="text-center p-8 w-full page-transition">
                <h1 class="text-4xl font-serif font-extrabold text-pink-500 mb-8 fade-in-down">
                    Our Precious Memories <span class="text-gray-600 animate-spin-emoji">📸</span>
                </h1>
                <div class="max-w-xl mx-auto bg-white p-6 rounded-2xl shadow-2xl border border-pink-100 relative scale-in">
                    <p class="text-sm flex justify-between text-gray-600 mb-4 fade-in-up">
                        <span class="font-semibold text-gray-800 animate-pulse">FROM: Bhai 💫</span>
                        <span class="text-red-500 animate-pulse">TO: My Lovely Sister 💖</span>
                    </p>
                    
                    <div id="carousel-content" class="relative flex justify-center items-center h-80 overflow-hidden border border-gray-200 rounded-lg bg-gradient-to-br from-pink-50 to-red-50">
                        <div id="carousel-item" class="w-full h-full flex flex-col items-center justify-center fade-carousel">
                            <span class="text-7xl animate-bounce-scale" id="carousel-emoji">😊</span>
                            <span class="mt-4 text-2xl font-bold text-red-500 glow-text animate-float" id="carousel-text">Best Sister Ever</span>
                        </div>
                        <!-- Carousel Controls handled by JS -->
                        <button onclick="changeSlide(-1)" class="absolute left-2 text-4xl text-pink-300 hover:text-pink-500 transition-all duration-200 hover:scale-125 active:scale-90"> &lt; </button>
                        <button onclick="changeSlide(1)" class="absolute right-2 text-4xl text-pink-300 hover:text-pink-500 transition-all duration-200 hover:scale-125 active:scale-90"> &gt; </button>
                        <!-- Dots Indicator handled by JS -->
                        <div id="carousel-dots" class="absolute bottom-4 flex gap-2"></div>
                    </div>
                    
                    <p class="text-sm flex justify-between text-gray-500 mt-4 fade-in-up" style="animation-delay: 0.3s;">
                        <span class="font-medium">DATE: Bhai Dooj | VALID FOR: Forever ✨</span>
                        <span class="text-pink-500 font-semibold">With love, your brother 💖</span>
                    </p>
                </div>
            </div>
        </div>

        <!-- Page 4: Tic-Tac-Toe Game -->
        <div id="page-4" class="page-content w-full max-w-6xl flex-col">
            <div class="text-center p-8 relative overflow-hidden w-full page-transition">
                <h1 class="text-4xl font-serif font-extrabold text-pink-500 mb-8 fade-in-down">
                    Fill in the blanks to get a chocolate <span class="text-red-500 animate-spin-emoji">🍫</span>
                </h1>
                <div class="relative max-w-sm mx-auto bg-white p-6 rounded-2xl shadow-2xl border border-pink-100 scale-in">
                    <!-- Tic-Tac-Toe Grid -->
                    <div id="tictactoe-board" class="grid grid-cols-3 gap-3">
                        <!-- Cells populated by JS -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Page 5: Music Player -->
        <div id="page-5" class="page-content w-full max-w-6xl flex-col">
            <div class="text-center p-8 w-full page-transition">
                <h1 class="text-4xl font-serif font-extrabold text-pink-500 mb-8 flex items-center justify-center fade-in-down">
                    A Picture For You <span class="text-red-400 ml-2 animate-heartbeat">💖</span>
                </h1>
                <div class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-2xl border border-pink-100 scale-in relative overflow-hidden">
                    <div class="absolute -top-12 -right-12 w-32 h-32 bg-pink-200 rounded-full opacity-30 animate-float"></div>
                    <div class="absolute -bottom-12 -left-12 w-32 h-32 bg-red-200 rounded-full opacity-30 animate-float" style="animation-delay: 2s;"></div>

                    <div id="player-image-wrapper" class="relative w-40 h-40 mx-auto rounded-xl shadow-lg border-4 border-white overflow-hidden bg-pink-100 flex items-center justify-center hover:scale-105 transition-transform duration-300">
                        <!-- StickFiguresSVG (Inline SVG) -->
                        <img src="img1.">
                        <div id="player-ring" class="absolute inset-0 border-4 border-pink-400 rounded-xl hidden"></div>
                    </div>

            
            
        </div>
        
        <!-- Page 6: Thank You -->
        <div id="page-6" class="page-content w-full max-w-6xl flex-col">
            <div class="text-center p-8 relative overflow-hidden w-full page-transition">
                <!-- Confetti Animation will be handled by JS -->
                <h2 class="text-md tracking-widest text-gray-500 uppercase font-semibold mb-2 fade-in-down">
                    ♦ FROM YOUR BHAI, WITH LOVE FROM TUSHYA ♦
                </h2>
                <h1 class="text-7xl font-serif font-extrabold text-pink-500 mb-4 glow-text fade-in-down" style="animation-delay: 0.3s;">
                    Thank <span class="animate-bounce-scale">You</span>
                </h1>
                <h2 class="text-3xl font-black text-gray-800 mb-8 fade-in-up" style="animation-delay: 0.6s;">
                    FOR ALWAYS BEING THERE
                </h2>
                <div class="max-w-md mx-auto bg-white p-8 rounded-2xl shadow-2xl border border-pink-100 relative scale-in">
                    <div class="absolute -top-8 -right-8 text-6xl animate-spin-emoji">🎀</div>
                    <div class="absolute -bottom-8 -left-8 text-6xl animate-spin-emoji" style="animation-delay: 1s;">💫</div>
                    <p class="text-gray-700 leading-relaxed max-w-xs mx-auto fade-in-up">
                        You make every small thing brighter and I'm lucky to have you — thanks for being the sweetest part of my days. <span class="text-red-500 animate-bounce">🥳</span>
                    </p>
                    <p class="mt-4 text-sm text-gray-600 italic fade-in-up" style="animation-delay: 0.3s;">
                        made with <span class="text-pink-500 animate-heartbeat">💖</span>, chocolates & sparkles — always yours.
                    </p>
                    <div class="mt-8 fade-in-up" style="animation-delay: 0.6s;">
                        <div class="inline-block animate-bounce-scale">
                            <!-- HelloKittySVG (Inline SVG) -->
                            <svg viewBox="0 0 100 100" class="w-32 h-auto transform hover:rotate-12 transition-transform duration-300" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="45" fill="#FFFFFF" stroke="#000000" stroke-width="2"/><circle cx="40" cy="40" r="3" fill="#000000"/><circle cx="60" cy="40" r="3" fill="#000000"/><path d="M50 50 L 53 50 M 50 50 L 47 50" stroke="#FF69B4" stroke-width="3"/><path d="M25 25 L 30 10 L 35 25 Z" fill="#FFFFFF" stroke="#000000" stroke-width="2"/><path d="M65 25 L 70 10 L 75 25 Z" fill="#FFFFFF" stroke="#000000" stroke-width="2"/><circle cx="70" cy="20" r="5" fill="#FF0000"/>
                            </svg>
                        </div>
                    </div>
                    <div class="mt-8 text-6xl font-serif font-bold text-yellow-600 opacity-30 animate-float">
                        Thank You
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Navigation Controls -->
    <footer id="footer" class="p-4 md:p-6 flex justify-between items-center w-full max-w-4xl mx-auto">
        <button id="back-btn" onclick="navigate(-1)" class="flex items-center space-x-2 px-4 py-2 rounded-full transition duration-300 active:scale-95 bg-blue-100 text-blue-600 hover:bg-blue-200">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
            <span>← Back</span>
        </button>
        <p id="page-indicator" class="text-sm text-gray-500">Page 1 of 6</p>
        <button id="next-btn" onclick="navigate(1)" class="flex items-center space-x-2 px-4 py-2 rounded-full transition duration-300 active:scale-95 bg-pink-100 text-pink-600 hover:bg-pink-200">
            <span>Next →</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
        </button>
    </footer>

<script>
    // --- Global State and Constants ---
    const TOTAL_PAGES = 6;
    let currentPage = 0; // 0-indexed
    const pages = Array.from({length: TOTAL_PAGES}, (_, i) => document.getElementById(`page-${i + 1}`));
    const pageIndicator = document.getElementById('page-indicator');
    const backBtn = document.getElementById('back-btn');
    const nextBtn = document.getElementById('next-btn');
    
    // --- Core Navigation Logic ---

    function updateNavigation() {
        // Update visibility
        pages.forEach((page, index) => {
            page.classList.remove('active');
            page.classList.remove('page-transition');
            if (index === currentPage) {
                page.classList.add('active');
                // Re-add class after a short delay to re-trigger animation
                setTimeout(() => page.classList.add('page-transition'), 10);
            }
        });

        // Update indicator
        pageIndicator.textContent = `Page ${currentPage + 1} of ${TOTAL_PAGES}`;

        // Update buttons
        backBtn.disabled = currentPage === 0;
        backBtn.className = `flex items-center space-x-2 px-4 py-2 rounded-full transition duration-300 active:scale-95 ${currentPage === 0 ? 'bg-gray-200 text-gray-500 cursor-not-allowed' : 'bg-blue-100 text-blue-600 hover:bg-blue-200'}`;
        
        nextBtn.disabled = currentPage === TOTAL_PAGES - 1;
        nextBtn.className = `flex items-center space-x-2 px-4 py-2 rounded-full transition duration-300 active:scale-95 ${currentPage === TOTAL_PAGES - 1 ? 'bg-gray-200 text-gray-500 cursor-not-allowed' : 'bg-pink-100 text-pink-600 hover:bg-pink-200'}`;
    }

    function navigate(direction) {
        let newPage = currentPage + direction;
        if (newPage >= 0 && newPage < TOTAL_PAGES) {
            currentPage = newPage;
            updateNavigation();
            // Re-initialize dynamic content for the new page
            if (currentPage === 2) initCarousel();
            if (currentPage === 3) initTicTacToe();
            if (currentPage === 4) stopMusic(true); // Stop music when leaving or entering game
        }
    }

    // --- Page 3: Carousel Logic ---

    const carouselMemories = [
        { emoji: '😊', text: 'Best Sister Ever' },
        { emoji: '🎉', text: 'Always Together' },
        { emoji: '💫', text: 'Forever Friends' },
    ];
    let activeSlide = 0;

    function initCarousel() {
        const dotsContainer = document.getElementById('carousel-dots');
        dotsContainer.innerHTML = ''; // Clear previous dots
        carouselMemories.forEach((_, i) => {
            const dot = document.createElement('div');
            dot.className = `transition-all duration-300 rounded-full cursor-pointer ${i === activeSlide ? 'w-3 h-3 bg-pink-500' : 'w-2 h-2 bg-pink-200'}`;
            dot.onclick = () => { activeSlide = i; updateCarousel(); };
            dotsContainer.appendChild(dot);
        });
        updateCarousel();
    }

    function updateCarousel() {
        const item = document.getElementById('carousel-item');
        const emojiSpan = document.getElementById('carousel-emoji');
        const textSpan = document.getElementById('carousel-text');
        const dots = document.getElementById('carousel-dots').children;

        // Apply fade-out effect quickly, then update content
        item.style.opacity = 0;
        setTimeout(() => {
            const memory = carouselMemories[activeSlide];
            emojiSpan.textContent = memory.emoji;
            textSpan.textContent = memory.text;
            item.style.opacity = 1;

            // Update dots
            Array.from(dots).forEach((dot, i) => {
                dot.className = `transition-all duration-300 rounded-full cursor-pointer ${i === activeSlide ? 'w-3 h-3 bg-pink-500' : 'w-2 h-2 bg-pink-200'}`;
            });
        }, 150);
    }

    function changeSlide(direction) {
        activeSlide = (activeSlide + direction + carouselMemories.length) % carouselMemories.length;
        updateCarousel();
    }

    // --- Page 4: Tic-Tac-Toe Logic ---

    const TTT_INITIAL_BOARD = ['❌', '❌', '❌', '❌', null, '❌', '❌', '❌', '❌'];
    let tttBoard = [...TTT_INITIAL_BOARD];
    let isGameUnlocked = false;

    function initTicTacToe() {
        const boardContainer = document.getElementById('tictactoe-board');
        boardContainer.innerHTML = '';
        tttBoard = [...TTT_INITIAL_BOARD];
        isGameUnlocked = false;

        tttBoard.forEach((cell, index) => {
            const button = document.createElement('button');
            button.className = getCellClass(cell, index);
            button.innerHTML = cell === '❌' ? '<span class="animate-bounce">❌</span>' : (cell || '');
            button.onclick = () => handleTTTClick(index);
            boardContainer.appendChild(button);
        });
    }

    function getCellClass(cell, index) {
        let baseClass = 'w-full h-20 text-4xl font-black rounded-lg transition-all duration-200 flex items-center justify-center';
        if (cell === '❌') {
            return `${baseClass} bg-pink-100 text-pink-400 opacity-70`;
        } else if (cell === '🎉') {
            return `${baseClass} bg-green-100 text-6xl shadow-xl animate-bounce-scale`;
        } else if (cell === null && !isGameUnlocked) {
            return `${baseClass} bg-white border border-pink-200 hover:bg-pink-50 cursor-pointer hover:scale-105 active:scale-95`;
        } else {
            return `${baseClass} cursor-default`;
        }
    }

    function handleTTTClick(index) {
        if (isGameUnlocked || tttBoard[index] !== null) return;

        if (index === 4) {
            isGameUnlocked = true;
            tttBoard[index] = '🎉';
            updateTTTBoard();
            showSuccessPopup();
        }
    }

    function updateTTTBoard() {
        const boardContainer = document.getElementById('tictactoe-board');
        boardContainer.innerHTML = '';
        tttBoard.forEach((cell, index) => {
            const button = document.createElement('button');
            button.className = getCellClass(cell, index);
            button.innerHTML = cell === '❌' ? '<span class="animate-bounce">❌</span>' : (cell === '🎉' ? '🎉' : '');
            button.disabled = cell !== null || isGameUnlocked;
            button.onclick = () => handleTTTClick(index);
            boardContainer.appendChild(button);
        });
    }

    function showSuccessPopup() {
        const popup = document.createElement('div');
        popup.className = 'fixed inset-0 flex items-center justify-center bg-black/20 backdrop-blur-sm z-50';
        popup.innerHTML = `
            <div class="pop-success">
                <h2 class="text-3xl font-serif font-extrabold text-pink-500 mb-2 animate-bounce-text">
                    You successfully unlocked a chocolate
                </h2>
                <p class="text-2xl font-bold text-red-500 animate-bounce">treat, yay! 🍫</p>
                <div class="mt-6 text-6xl animate-spin-emoji">🎉</div>
            </div>
        `;
        document.body.appendChild(popup);
        
        // Auto-hide the popup after 3 seconds
        setTimeout(() => {
            popup.remove();
        }, 3000);
    }

    // --- Page 5: Music Player Logic ---

    let isPlaying = false;
    let progress = 0;
    let intervalId = null;

    function updatePlayerUI() {
        const statusEl = document.getElementById('player-status');
        const timeEl = document.getElementById('player-current-time');
        const progressBar = document.getElementById('player-progress');
        const playIcon = document.getElementById('icon-play');
        const pauseIcon = document.getElementById('icon-pause');
        const playButton = document.getElementById('btn-play-pause');
        const imageWrapper = document.getElementById('player-image-wrapper');
        const ring = document.getElementById('player-ring');

        // Update Status and Time
        const minutes = String(Math.floor(progress / 60)).padStart(1, '0');
        const seconds = String(progress % 60).padStart(2, '0');
        timeEl.textContent = `${minutes}:${seconds}`;

        // Update Progress Bar
        progressBar.style.width = `${(progress / 27) * 100}%`;

        // Update Play/Pause Button
        if (isPlaying) {
            statusEl.textContent = 'PLAYING';
            statusEl.classList.add('text-green-500', 'animate-pulse');
            playButton.classList.remove('bg-gradient-to-br', 'from-pink-400', 'to-pink-500');
            playButton.classList.add('bg-gradient-to-br', 'from-pink-600', 'to-red-600');
            playIcon.classList.add('hidden');
            pauseIcon.classList.remove('hidden');
            imageWrapper.children[0].classList.add('animate-bounce-scale');
            ring.classList.remove('hidden');
        } else {
            statusEl.textContent = 'PAUSED';
            statusEl.classList.remove('text-green-500', 'animate-pulse');
            playButton.classList.add('bg-gradient-to-br', 'from-pink-400', 'to-pink-500');
            playButton.classList.remove('bg-gradient-to-br', 'from-pink-600', 'to-red-600');
            playIcon.classList.remove('hidden');
            pauseIcon.classList.add('hidden');
            imageWrapper.children[0].classList.remove('animate-bounce-scale');
            ring.classList.add('hidden');
        }
    }

    function handlePlayPause() {
        isPlaying = !isPlaying;
        
        if (isPlaying) {
            // Start progress simulation
            intervalId = setInterval(() => {
                progress++;
                if (progress > 27) {
                    stopMusic();
                } else {
                    updatePlayerUI();
                }
            }, 1000);
        } else {
            // Pause progress simulation
            clearInterval(intervalId);
        }
        updatePlayerUI();
    }

    function stopMusic(reset = false) {
        clearInterval(intervalId);
        isPlaying = false;
        if (reset) {
            progress = 0;
        }
        updatePlayerUI();
    }

    function handleSkip(forward) {
        progress = forward ? 0 : 0; // Simple reset for mock skips
        updatePlayerUI();
    }

    // --- Initialization ---

    document.addEventListener('DOMContentLoaded', () => {
        updateNavigation(); // Initialize first page view
        
        // Initialize TTT board on load (it won't be visible yet, but avoids errors)
        initTicTacToe();

        // Optional: Pre-initialize carousel to set up dots
        initCarousel();
    });
</script>

</body>
</html>
